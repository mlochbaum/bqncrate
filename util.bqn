#! /usr/bin/env bqn

SplitTSV â† >(@+9)âŠ¸=âŠ¸(Ã—âˆ˜â†•âˆ˜â‰ âŠ¸(â†“Â¨)+`âŠ¸âŠ”)Â¨
JoinTSV â† (<1â†“âˆ¾)Ë˜ (@+9)âŠ¸âˆ¾Â¨
_onTSV â† {JoinTSVâˆ˜ğ”½âˆ˜SplitTSV}
_file â† { ğ•© â€¢FLines ğ”½ _onTSV â€¢FLines ğ•© }

Reorder â† {ğ•Št:
  letters â† "Â¯_"âˆ¾âˆ¾"0aA"+âŸœâ†•Â¨10â€¿26â€¿26
  chars â† " âŠ¢âŠ£+-Ã—âˆ¨âˆ§âŒˆâŒŠâŒ½Ã·|Â»Â«=â‰ <>â‰¤â‰¥â‰¡â‰¢â†“â†‘â¥Šâ‹†âˆšÂ¬Ë™Ëœâˆ˜âŠ¸âŸœË˜Â¨âŒœâ—‹/Â´â‰âŒ¾âŠ˜â—¶Ëâˆ¾â‹ˆâ‰â€¿âŠâ†•âˆŠâŠâ¼âŸâ‹â’`â‰âŠ‘âŠ’â·âŠ”âš‡!âŠ@â†â‡â†©:;ğ•¨ğ•©ğ”½ğ”¾ğ•—ğ•˜ğ•ğ•ğ•¤ğ•Šğ•£(){}âŸ¨âŸ©â‹„,#0123456789_XYZMNIJABCDEFGHIJKLMNOPQRSTUVWXYZfghasvmabcdefghijklmnopqrstuvwxyzÃ€"

  [syntax,class] â† ("SYNTAX"â€¿"CLASS"âŠËœâŠt) âŠ â‰1â†“t
  order â† â‹â‰[
    "Primitive"â€¿"System"â€¿"Syntax" âŠ class
    (â‰ âˆ¾Â·âˆ¨charsâŠ¸âŠ)âˆ˜(Â¬âˆ˜âˆŠ/âŠ£)âŸœ(" "âˆ¾letters)Â¨ syntax
    charsâŠ¸âŠÂ¨ syntax
  ]
  t âŠËœ 0âˆ¾1+order
}

[opts,acts] â† â‰[
  "reorder"â€¿{ğ•¤â‹„Reorder _file "table.tsv"}
  "showdup"â€¿{ğ•¤â‹„â€¢OutÂ¨ (Â¬âˆ˜(âˆŠâˆ§âˆŠâŒ¾âŒ½)âŠË˜)âŠ¸/ _onTSV â€¢FLines "table.tsv"}
]

{ğ•@} (optsâŠ¸âŠâŒ¾< âŠ‘â€¢args) âŠ‘ actsâˆ¾âŸ¨{ğ•¤â‹„0!Ëœ"Option not found!"}âŸ©
